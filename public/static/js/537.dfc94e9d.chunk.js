"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[537],{537:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(555),a=n(43),i=n(579);const s=2;function o(e){const t=[{id:"c1",name:"Soldat",cost:1,atk:1,hp:2,categories:["Empire","Infanterie"],faction:"Empire",effect:""},{id:"c2",name:"Archer",cost:2,atk:2,hp:2,charge:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Charge"},{id:"c3",name:"Garde",cost:2,atk:1,hp:4,taunt:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Provocation"},{id:"c4",name:"Champion",cost:3,atk:3,hp:3,shield:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Bouclier"},{id:"c5",name:"Berserker",cost:4,atk:5,hp:2,lifesteal:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Vol de vie"},{id:"c6",name:"Paladin",cost:5,atk:4,hp:5,lifesteal:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Vol de vie"}],n=[];for(let a=0;a<3;a++)t.forEach(t=>n.push((0,r.A)((0,r.A)({},t),{},{uid:e+"_"+t.id+"_"+a+"_"+Math.random().toString(36).slice(2,7)})));for(let r=n.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[n[r],n[e]]=[n[e],n[r]]}return n}function c(){const[e,t]=(0,a.useState)("home"),n=(0,a.useRef)(null),c=(0,a.useRef)([]),u=(0,a.useRef)(!1),h=(0,a.useRef)(null),p=(0,a.useRef)(null),[f,m]=(0,a.useState)(null),[g,x]=(0,a.useState)(0),[b,k]=(0,a.useState)({name:"Vous",hp:20,deck:o("P1"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur"}),[v,y]=(0,a.useState)({name:"IA",hp:20,deck:o("P2"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur IA"}),[j,A]=(0,a.useState)("P1"),[w,P]=(0,a.useState)([]),[S,R]=(0,a.useState)(null),[N,T]=(0,a.useState)(null),[I,C]=(0,a.useState)(0),[W,E]=(0,a.useState)(null),[D,z]=(0,a.useState)(null),[V,O]=(0,a.useState)([]),[U,L]=(0,a.useState)(!1),[M,_]=(0,a.useState)(null),[q,X]=(0,a.useState)("right"),F=(0,a.useRef)(b),B=(0,a.useRef)(v),H=(0,a.useRef)(j),K=(0,a.useRef)(N);function J(){n.current&&(clearTimeout(n.current),n.current=null),c.current&&c.current.length&&(c.current.forEach(e=>clearTimeout(e)),c.current=[])}function Y(e,t){const n=setTimeout(e,t);return c.current.push(n),n}function G(){h.current&&(clearTimeout(h.current),h.current=null),p.current&&(clearInterval(p.current),p.current=null),J(),m(null),x(0)}function Q(e){P(t=>[e,...t.slice(0,49)])}function Z(e,t){"P1"===e?k(e=>(0,r.A)((0,r.A)({},e),t(e))):y(e=>(0,r.A)((0,r.A)({},e),t(e)))}function $(e){return"P1"===e?b:v}function ee(e){return"P1"===e?F.current:B.current}function te(){return H.current}function ne(){return K.current}function re(e){return"P1"===e?"P2":"P1"}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=$(e),r=n.deck.length,a=Math.min(t,r),i=t-a,s=n.fatigue||0;let o=0;for(let c=1;c<=i;c++)o+=s+c;Z(e,e=>{const t=[...e.deck],n=t.splice(0,a);return{deck:t,hand:[...e.hand,...n],fatigue:(e.fatigue||0)+i,hp:e.hp-o}}),i>0&&(Q("[Fatigue] ".concat(n.name," subit ").concat(o," d\xe9g\xe2t(s) (pioche impossible)")),setTimeout(()=>ce(),0))}function ie(e){if(ne())return;if(te()!==e)return;const t=$(e);t.warlordUsed||(t.energy<1?Q("[Seigneur] Pas assez d'\xe9nergie."):(Z(e,e=>({energy:e.energy-1,warlordUsed:!0})),ae(e,1),Q("[Seigneur] ".concat(t.name," utilise sa capacit\xe9: pioche 1 (co\xfbt 1)"))))}function se(e){R(null),A(e),C(t=>t+("P1"===e?1:0)),Z(e,e=>{const t=Math.min(10,e.maxEnergy+1);return{energy:t,maxEnergy:t,warlordUsed:!1,field:e.field.map(e=>(0,r.A)((0,r.A)({},e),{},{canAttack:!0}))}}),ae(e,1),Q("[Tour] ".concat($(e).name)),J(),h.current&&(clearTimeout(h.current),h.current=null);const t=("P1"===e?I+1:I)>=6?6e4:3e4,a=Date.now()+t;m(a),Q("[Timer] ".concat($(e).name,": ").concat(Math.round(t/1e3),"s")),x(0),p.current&&(clearInterval(p.current),p.current=null),p.current=setInterval(()=>{x(e=>{const n=Date.now(),r=Math.max(0,a-n);return Math.min(1,1-r/t)})},100),h.current=setTimeout(()=>{N||j!==e||(Q("[Timer] Fin automatique du tour de ".concat($(e).name)),le(e))},t),"P2"===e&&(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>function(){if(ne())return;const e=ee("P2");Q("[IA] R\xe9flexion\u2026"),!e.warlordUsed&&e.energy>=1&&e.hand.length<=4&&ie("P2");const t=e=>2*e.atk+e.hp+(e.taunt?2:0)+(e.shield?1.5:0)+(e.charge?1:0)+(e.lifesteal?1.5:0);let n=e.energy,a=[...e.hand];const i=[];for(;;){if(Math.max(0,8-ee("P2").field.length-i.length)<=0)break;const e=n,r=a.filter(t=>t.cost<=e);if(!r.length)break;r.sort((e,n)=>t(n)-t(e)||n.cost-e.cost);const s=r[0];if(i.push(s),n-=s.cost,a=a.filter(e=>e.uid!==s.uid),i.length>10)break}i.length&&(Z("P2",e=>{const t=e.hand.filter(e=>!i.find(t=>t.uid===e.uid)),n=Math.max(0,8-e.field.length),a=i.slice(0,n).map(e=>(0,r.A)((0,r.A)({},e),{},{canAttack:!!e.charge}));return{hand:t,field:[...e.field,...a],energy:e.energy-a.reduce((e,t)=>e+t.cost,0)}}),i.forEach(e=>Q("[IA] Invoque ".concat(e.name))),Y(()=>{},200));const o=e.field.filter(e=>e.canAttack).length+i.filter(e=>e.charge).length,c=!e.warlordUsed&&s>0;if(0===o&&!c&&!ne()&&"P2"===te())return Q("[IA] Fin de tour (aucune action)"),void le("P2");Y(()=>{if(ne()||"P2"!==te())return void Q("[IA] Annul\xe9: tour=".concat(te()," winner=").concat(!!ne()));const e=[],t=ee("P2"),n=t.field.filter(e=>e.canAttack);Q("[IA] Pr\xe9pare ".concat(n.length," attaquant(s)")),0===n.length&&(t.warlordUsed||s<=0)&&Q("[IA] Aucune attaque possible.");const r=(e,t)=>t.shield?0:e.atk;for(const s of n){const t=ee("P1").field,n=t.filter(e=>e.taunt),a=n.length?n:t;if(a.length){const t=a.filter(e=>!e.shield&&s.atk>=e.hp),n=t.filter(e=>s.hp-r(e,s)>0);let i;i=n.length?[...n].sort((e,t)=>t.atk-e.atk)[0]:t.length?[...t].sort((e,t)=>t.atk-e.atk)[0]:[...a].sort((e,t)=>t.atk-e.atk)[0],e.push(["P2","creature",s.uid,"creature",i.uid])}else e.push(["P2","creature",s.uid,"warlord"])}if(!ne()&&"P2"===te()&&!ee("P2").warlordUsed&&s>0){const t=ee("P1").field,n=t.filter(e=>e.taunt),r=n.length?n:t;if(r.length){const t=r.filter(e=>!e.shield&&s>=e.hp),n=t.length?[...t].sort((e,t)=>t.atk-e.atk)[0]:[...r].sort((e,t)=>t.atk-e.atk)[0];e.push(["P2","warlord","WARLORD_P2","creature",n.uid])}else e.push(["P2","warlord","WARLORD_P2","warlord"])}const a=350;e.forEach((e,t)=>Y(()=>oe(...e),t*a));const i=e.length*a+450;Q("[IA] ".concat(e.length," action(s) d'attaque.")),0===e.length?ne()||"P2"!==te()||(Q("[IA] Fin de tour (aucune action)"),le("P2")):Y(()=>{ne()||"P2"!==te()||le("P2")},i)},200)}(),300),Y(()=>{if(ne()||"P2"!==te())return;const e=ee("P2"),t=e.field.filter(e=>e.canAttack),n=!e.warlordUsed&&s>0;0!==t.length||n||(Q("[IA] Failsafe: fin de tour"),le("P2"))},1200))}function oe(e,t,n,a,i){if(ne())return;if(te()!==e)return;const o="warlord"===t?"WARLORD_".concat(e):n,c="warlord"===a?"WARLORD_".concat(re(e)):i;E({attackerId:o,attackerOwner:e,targetId:c,targetKind:a}),_({fromOwner:e,fromId:o,toId:c,ts:Date.now()});const l=ee(e),d=re(e),u=ee(d);let h=[];if("creature"===t&&"creature"===a){const t=(l.field||[]).find(e=>e.uid===n),r=(u.field||[]).find(e=>e.uid===i);if(t&&r){const n=r.shield?0:t.atk,a=t.shield?0:r.atk;n>0&&h.push({id:r.uid,amount:n,owner:d}),a>0&&h.push({id:t.uid,amount:a,owner:e})}}else if("creature"===t&&"warlord"===a){const t=(l.field||[]).find(e=>e.uid===n);if(t){const n=t.atk,r=t.shield?0:s;n>0&&h.push({id:"WARLORD_".concat(d),amount:n,owner:d}),r>0&&h.push({id:t.uid,amount:r,owner:e})}}else if("warlord"===t&&"creature"===a){const t=(u.field||[]).find(e=>e.uid===i);if(t){const n=t.shield?0:s,r=t.atk;n>0&&h.push({id:t.uid,amount:n,owner:d}),r>0&&h.push({id:"WARLORD_".concat(e),amount:r,owner:e})}}else"warlord"===t&&"warlord"===a&&s>0&&(h.push({id:"WARLORD_".concat(d),amount:s,owner:d}),h.push({id:"WARLORD_".concat(e),amount:s,owner:e}));let p=[];setTimeout(()=>{if(ne()||te()!==e)return;c&&z(c),h.length&&(p=h.map((e,t)=>(0,r.A)((0,r.A)({},e),{},{key:"".concat(Date.now(),"_").concat(t)})),O(e=>[...e,...p].slice(-12)),p.some(e=>e.amount>=4)&&(L(!0),setTimeout(()=>L(!1),120))),"warlord"===t&&"warlord"===a?function(e){const t=re(e),n=$(e),r=$(t);if(n.warlordUsed||j!==e)return;Z(t,e=>({hp:e.hp-s})),Z(e,e=>({hp:e.hp-s})),Z(e,e=>({warlordUsed:!0})),Q("[Seigneur] ".concat(n.name," attaque ").concat(r.name," pour ").concat(s," (riposte ").concat(s,")")),ce()}(e):"warlord"===t&&"creature"===a?function(e,t){const n=re(e),a=$(e),i=$(n);if(a.warlordUsed||j!==e)return;const o=i.field.find(e=>e.uid===t);if(!o)return;const c=s,l=o.atk;Z(n,e=>({field:e.field.map(e=>{if(e.uid!==t)return e;const n=!(e.shield&&c>0)&&e.shield,a=e.shield?0:c;return(0,r.A)((0,r.A)({},e),{},{hp:e.hp-a,shield:n})}).filter(e=>e.hp>0)})),Z(e,e=>({hp:e.hp-l,warlordUsed:!0})),Q("[Seigneur] ".concat(a.name," frappe une cr\xe9ature (").concat(c,") et subit ").concat(l," en riposte")),ce()}(e,i):"creature"===t&&"warlord"===a?function(e,t){const n=re(e),a=$(e),i=$(n),o=a.field.find(e=>e.uid===t);if(!o||!o.canAttack)return;const c=o.atk,l=i.hp,d=Math.max(0,Math.min(c,l));Z(n,e=>({hp:e.hp-c})),Z(e,e=>{const n=o.lifesteal?d:0,a=e.field.map(e=>{if(e.uid!==t)return e;const n=!(s>0&&e.shield)&&e.shield,a=e.shield?0:s,i=e.hp-a;return(0,r.A)((0,r.A)({},e),{},{canAttack:!1,shield:n,hp:i})}).filter(e=>e.hp>0);return{hp:e.hp+n,field:a}}),Q("[Attaque] ".concat(a.name," (").concat(o.name,") inflige ").concat(c," \xe0 ").concat(i.name)),s>0&&Q("[Seigneur] Riposte et inflige ".concat(s," \xe0 l'attaquant"));ce()}(e,n):function(e,t,n){const a=re(e),i=$(e),s=$(a),o=i.field.find(e=>e.uid===t),c=s.field.find(e=>e.uid===n);if(!o||!c||!o.canAttack)return;const l=o.atk,d=c.atk,u=c.shield?0:l;Z(e,e=>{const n=e.field.map(e=>{if(e.uid!==t)return e;const n=!(d>0&&e.shield)&&e.shield,a=e.hp-(e.shield?0:d);return(0,r.A)((0,r.A)({},e),{},{hp:a,canAttack:!1,shield:n})}).filter(e=>e.hp>0),a=o.lifesteal?u:0;return{field:n,hp:e.hp+a}}),Z(a,e=>({field:e.field.map(e=>{if(e.uid!==n)return e;const t=!(l>0&&e.shield)&&e.shield,a=e.hp-(e.shield?0:l);return(0,r.A)((0,r.A)({},e),{},{hp:a,shield:t})}).filter(e=>e.hp>0)})),Q("[Combat] ".concat(o.name," (").concat(l,") \u2194 ").concat(c.name," (").concat(d,")")),ce()}(e,n,i),setTimeout(()=>z(null),260);const o=p.map(e=>e.key);setTimeout(()=>O(e=>e.filter(e=>!o.includes(e.key))),700)},180),setTimeout(()=>E(null),600),setTimeout(()=>_(null),320)}function ce(){const e=b.hp,t=v.hp;e<=0&&t<=0?(T("\xc9galit\xe9"),G()):e<=0?(T(v.name),G()):t<=0&&(T(b.name),G())}function le(e){if(ne())return;te()===e&&(Q("[Tour] Fin ".concat(e," \u2192 ").concat(re(e))),J(),h.current&&(clearTimeout(h.current),h.current=null),p.current&&(clearInterval(p.current),p.current=null),m(null),x(0),se(re(e)))}function de(){G(),k({name:"Vous",hp:20,deck:o("P1"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur"}),y({name:"IA",hp:20,deck:o("P2"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur IA"}),R(null),z(null),O([]),L(!1),T(null),P([]),A("P1"),C(0),setTimeout(()=>{ae("P1",3),ae("P2",3),se("P1")},100)}(0,a.useEffect)(()=>{F.current=b},[b]),(0,a.useEffect)(()=>{B.current=v},[v]),(0,a.useEffect)(()=>{H.current=j},[j]),(0,a.useEffect)(()=>{K.current=N},[N]),(0,a.useEffect)(()=>{"battle"!==e||u.current||0!==b.hand.length||0!==v.hand.length||(u.current=!0,ae("P1",3),ae("P2",3),se("P1"))},[e]),(0,a.useEffect)(()=>()=>{J(),h.current&&(clearTimeout(h.current),h.current=null),p.current&&(clearInterval(p.current),p.current=null)},[]);const ue=b,he=v,pe=()=>(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",borderTop:"1px solid var(--line)",paddingTop:8,marginTop:12},children:[(0,i.jsx)("button",{className:"week-btn ".concat("deck"===e?"primary":""),onClick:()=>t("deck"),children:"Cr\xe9ez son deck"}),(0,i.jsx)("button",{className:"week-btn ".concat("shop"===e?"primary":""),onClick:()=>t("shop"),children:"Boutique (dev)"}),(0,i.jsx)("button",{className:"week-btn ".concat("home"===e?"primary":""),onClick:()=>t("home"),children:"Home"}),(0,i.jsx)("button",{className:"week-btn ".concat("event"===e?"primary":""),onClick:()=>t("event"),children:"Event (dev)"}),(0,i.jsx)("button",{className:"week-btn ".concat("clan"===e?"primary":""),onClick:()=>t("clan"),children:"Clan (dev)"})]});return"battle"!==e?(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("style",{children:"\n            @keyframes cg-float { from { transform: translate(-50%, 0); opacity: 1; } to { transform: translate(-50%, -18px); opacity: 0; } }\n            .cg-arena.shake { animation: cg-shake 120ms ease; }\n            @keyframes cg-shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }\n          "}),(0,i.jsx)("h2",{style:{marginTop:0},children:"Jeu de cartes"}),(0,i.jsx)("p",{style:{color:"var(--muted)",marginTop:-6},children:"Un prototype rapide de combat au tour par tour."}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)("button",{className:"week-btn primary",onClick:()=>{n.current&&(clearTimeout(n.current),n.current=null),u.current=!0,t("battle"),de()},children:"Lancez un combat (IA)"})}),(0,i.jsx)(pe,{}),"deck"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Cr\xe9ation de deck"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"\xc0 venir: \xe9diteur pour composer votre deck personnalis\xe9."})]}),"shop"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Boutique (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Prototype: packs de cartes, cosm\xe9tiques, etc."})]}),"event"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"\xc9v\xe9nements (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Saisons, d\xe9fis hebdo, classements\u2026"})]}),"clan"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Clans (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Rejoignez un clan, missions et bonus coop."})]})]})}):(0,i.jsxs)("div",{className:"cardgame-root",children:[(0,i.jsx)("style",{children:"\n        @keyframes cg-float { from { transform: translate(-50%, 0); opacity: 1; } to { transform: translate(-50%, -18px); opacity: 0; } }\n        .cg-arena.shake { animation: cg-shake 120ms ease; }\n        @keyframes cg-shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }\n        /* Ability overlays */\n        @keyframes fx-pulse { 0% { opacity: 0.35; } 50% { opacity: 0.9; } 100% { opacity: 0.35; } }\n        @keyframes fx-shimmer { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }\n        .fx-taunt { position:absolute; inset:-2px; border:2px solid rgba(255,165,0,0.85); border-radius:8px; box-shadow: 0 0 10px rgba(255,165,0,0.6); animation: fx-pulse 1.2s infinite ease-in-out; pointer-events:none; }\n        .fx-shield { position:absolute; inset:-2px; border-radius:8px; border:2px solid rgba(41,128,185,0.9); box-shadow: 0 0 10px rgba(41,128,185,0.6); overflow:hidden; pointer-events:none; }\n        .fx-shield::after { content:''; position:absolute; inset:-2px; background: linear-gradient(90deg, rgba(255,255,255,0), rgba(41,128,185,0.25), rgba(255,255,255,0)); background-size: 200% 100%; animation: fx-shimmer 1.2s linear infinite; }\n        .fx-charge { position:absolute; inset:-2px; border-radius:8px; box-shadow: inset 0 0 10px rgba(231,76,60,0.6); animation: fx-pulse 0.9s infinite ease-in-out; pointer-events:none; }\n        .fx-life { position:absolute; bottom:-2px; left:-2px; right:-2px; height:4px; border-radius:0 0 8px 8px; background: rgba(46,204,113,0.9); animation: fx-pulse 1.5s infinite ease-in-out; pointer-events:none; }\n      "}),(0,i.jsx)("div",{className:"cg-top",children:(0,i.jsx)(l,{player:he,isSelf:!1,turn:j,onCardClick:()=>{},selectable:!1,highlightAttacker:null})}),(0,i.jsx)(d,{p1Field:ue.field,p2Field:he.field,p1Hp:ue.hp,p2Hp:he.hp,p1WarlordUsed:ue.warlordUsed,attackAnim:W,impactId:D,damageAnims:V,shake:U,projectile:M,turn:j,selectedAttacker:S,onSelectAttacker:e=>function(e,t){N||j===t&&e.canAttack&&"P1"===j&&(S&&S.uid===e.uid?R(null):R(e))}(e,"P1"),onSelectWarlord:()=>{"P1"!==j||ue.warlordUsed||(null!==S&&void 0!==S&&S.isWarlord?R(null):R({uid:"WARLORD_P1",isWarlord:!0,atk:s,canAttack:!0}))},onWarlordAbility:()=>ie("P1"),onAttackCard:e=>{if(!S)return;const t=he.field.some(e=>e.taunt),n=he.field.find(t=>t.uid===e);t&&n&&!n.taunt?Q("[R\xe8gle] Vous devez cibler une cr\xe9ature avec Provocation."):(S.isWarlord?oe("P1","warlord","WARLORD_P1","creature",e):oe("P1","creature",S.uid,"creature",e),R(null))},onAttackWarlord:()=>{if(!S)return;he.field.some(e=>e.taunt)?Q("[R\xe8gle] Une Provocation bloque le Seigneur."):(S.isWarlord?oe("P1","warlord","WARLORD_P1","warlord"):oe("P1","creature",S.uid,"warlord"),R(null))}}),(0,i.jsxs)("div",{className:"cg-hand-area",children:[(0,i.jsx)(l,{player:ue,isSelf:!0,turn:j,onCardClick:function(e){if("P1"!==j||N)return;const t=$("P1"),n=t.hand.find(t=>t.uid===e);n&&(t.energy<n.cost||(t.field.length>=8?Q("[Limite] Vous avez d\xe9j\xe0 8 troupes en jeu."):(Z("P1",t=>{const a=t.hand.filter(t=>t.uid!==e),i=(0,r.A)((0,r.A)({},n),{},{canAttack:!!n.charge});return{hand:a,field:"left"===q?[i,...t.field]:[...t.field,i],energy:t.energy-n.cost}}),Q("[Jeu] Vous invoquez ".concat(n.name)))))},selectable:!0,highlightAttacker:null===S||void 0===S?void 0:S.uid,onAttackPlayer:()=>{}}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Placement:"}),(0,i.jsx)("button",{className:"week-btn ".concat("left"===q?"primary":""),onClick:()=>X("left"),children:"Gauche"}),(0,i.jsx)("button",{className:"week-btn ".concat("right"===q?"primary":""),onClick:()=>X("right"),children:"Droite"}),(0,i.jsxs)("span",{style:{fontSize:12,color:"var(--muted)"},children:["Limite: ",ue.field.length,"/8"]})]})]}),(0,i.jsxs)("div",{className:"cg-sidebar",children:[(0,i.jsxs)("div",{className:"cg-panel",children:[(0,i.jsx)("h3",{style:{margin:"0 0 6px"},children:"Statut"}),(0,i.jsxs)("div",{children:["Tour: ","P1"===j?"Vous":"IA"," (#",I,")"]}),(0,i.jsxs)("div",{children:["Votre PV: ",ue.hp]}),(0,i.jsxs)("div",{children:["IA PV: ",he.hp]}),(0,i.jsxs)("div",{children:["\xc9nergie: ",ue.energy,"/",ue.maxEnergy]}),(0,i.jsxs)("div",{children:["Deck: ",ue.deck.length]}),(0,i.jsxs)("div",{children:["IA Deck: ",he.deck.length]}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",gap:10,alignItems:"center"},children:[(0,i.jsxs)("div",{style:{position:"relative",width:64,height:64,flex:"0 0 auto"},title:f?"".concat(Math.max(0,Math.ceil((f-Date.now())/1e3)),"s restantes"):"",children:[(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:"50%",background:"conic-gradient(var(--accent) ".concat(Math.round(360*(g||0)),"deg, rgba(0,0,0,0.1) 0deg)")}}),(0,i.jsx)("div",{style:{position:"absolute",inset:6,borderRadius:"50%",background:"var(--card)"}}),(0,i.jsx)("button",{className:"week-btn",disabled:N||"P1"!==j,onClick:function(){N||(J(),h.current&&(clearTimeout(h.current),h.current=null),p.current&&(clearInterval(p.current),p.current=null),m(null),x(0),se(re(j)))},style:{position:"absolute",inset:12,borderRadius:"50%",width:"auto",height:"auto",padding:"6px 8px"},children:"Fin"}),f&&(0,i.jsxs)("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",fontSize:12,fontWeight:600,color:"var(--muted)"},children:[Math.max(0,Math.ceil((f-Date.now())/1e3)),"s"]})]}),(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:"P1"===j?"Votre tour":"Tour IA"}),(0,i.jsx)("button",{className:"week-btn",onClick:de,children:"Rejouer"})]}),N&&(0,i.jsxs)("div",{style:{marginTop:8,fontWeight:600},children:["Victoire: ",N]})]}),(0,i.jsxs)("div",{className:"cg-panel",children:[(0,i.jsx)("h4",{style:{margin:"0 0 6px"},children:"Capacit\xe9s"}),(0,i.jsxs)("ul",{style:{paddingLeft:16,margin:0,fontSize:12,lineHeight:1.5},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Provocation"}),": doit \xeatre attaqu\xe9e en priorit\xe9. Emp\xeache d'attaquer le h\xe9ros."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Charge"}),": peut attaquer le tour o\xf9 elle est invoqu\xe9e."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Bouclier"}),": ignore la prochaine source de d\xe9g\xe2ts re\xe7us."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Vol de vie"}),": soigne votre h\xe9ros \xe0 hauteur des d\xe9g\xe2ts inflig\xe9s."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Fatigue"}),": piocher sans cartes inflige des d\xe9g\xe2ts croissants."]})]})]}),(0,i.jsxs)("div",{className:"cg-panel",style:{maxHeight:240,overflowY:"auto"},children:[(0,i.jsx)("h4",{style:{margin:"0 0 6px"},children:"Journal"}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:12},children:w.map((e,t)=>(0,i.jsx)("li",{style:{marginBottom:2},children:e},t))})]})]})]})}function l(e){let{player:t,isSelf:n,onCardClick:r,selectable:a,highlightAttacker:s,onAttackPlayer:o}=e;const c=e=>{let t="0 1px 3px rgba(0,0,0,0.25)";return e.taunt&&(t+=", 0 0 8px rgba(255,165,0,0.45)"),e.shield&&(t+=", 0 0 8px rgba(52,152,219,0.45)"),e.lifesteal&&(t+=", 0 0 8px rgba(46,204,113,0.45)"),e.charge&&(t+=", 0 0 8px rgba(231,76,60,0.45)"),{boxShadow:t,transition:"transform 120ms ease, box-shadow 200ms ease"}};return(0,i.jsxs)("div",{className:"cg-player ".concat(n?"self":"opp"),children:[(0,i.jsxs)("div",{className:"cg-player-header",children:[(0,i.jsx)("strong",{children:t.name})," \u2014 PV ",t.hp," \u2014 \xc9nergie ",t.energy,"/",t.maxEnergy]}),(0,i.jsxs)("div",{className:"cg-hand",children:[t.hand.map(e=>(0,i.jsxs)("div",{className:"cg-card small",title:"".concat(e.name,"\nCo\xfbt:").concat(e.cost," ATK:").concat(e.atk," PV:").concat(e.hp),onClick:()=>a&&n&&r(e.uid),style:c(e),children:[(0,i.jsx)("div",{className:"cg-cost",children:e.cost}),(0,i.jsx)("div",{className:"cg-name",children:e.name}),(0,i.jsx)("div",{style:{fontSize:9,color:"var(--muted)"},children:(e.categories||[]).join("/")}),e.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:e.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[e.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),e.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),e.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),e.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsxs)("div",{className:"cg-stats",children:[e.atk,"/",e.hp]})]},e.uid)),!t.hand.length&&(0,i.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"Main vide"})]})]})}function d(e){let{p1Field:t,p2Field:n,p1Hp:a,p2Hp:o,p1WarlordUsed:c,selectedAttacker:l,onSelectAttacker:d,onSelectWarlord:h,onAttackCard:p,onAttackWarlord:f,onWarlordAbility:m,turn:g,attackAnim:x,impactId:b,damageAnims:k,shake:v,projectile:y}=e;const j=e=>{let t="0 1px 3px rgba(0,0,0,0.25)";return e.taunt&&(t+=", 0 0 8px rgba(255,165,0,0.45)"),e.shield&&(t+=", 0 0 8px rgba(52,152,219,0.45)"),e.lifesteal&&(t+=", 0 0 8px rgba(46,204,113,0.45)"),e.charge&&(t+=", 0 0 8px rgba(231,76,60,0.45)"),{boxShadow:t,transition:"transform 160ms ease, box-shadow 200ms ease"}};return(0,i.jsxs)("div",{className:"cg-arena".concat(v?" shake":""),children:[y&&(0,i.jsx)(u,{fromId:y.fromId,toId:y.toId}),(0,i.jsxs)("div",{className:"cg-row opp",children:[n.map(e=>(0,i.jsxs)("div",{className:"cg-card",title:"".concat(e.name,"\nATK:").concat(e.atk," PV:").concat(e.hp),onClick:()=>l&&p(e.uid),style:(0,r.A)((0,r.A)({},j(e)),{},{transform:x&&x.attackerId===e.uid&&"P2"===x.attackerOwner?"translateY(18px)":void 0,position:"relative"}),"data-cg-id":e.uid,children:[(0,i.jsx)("div",{className:"cg-name",children:e.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(e.categories||[]).join("/")}),e.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:e.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[e.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),e.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),e.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),e.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsxs)("div",{className:"cg-stats",children:[e.atk,"/",e.hp]}),b===e.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:e.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),k.filter(t=>t.id===e.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),e.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),e.shield&&(0,i.jsx)("div",{className:"fx-shield"}),e.charge&&(0,i.jsx)("div",{className:"fx-charge"}),e.lifesteal&&(0,i.jsx)("div",{className:"fx-life"})]},e.uid)),(0,i.jsxs)("div",{className:"cg-card warlord",title:"Seigneur\nATK:".concat(s," PV:").concat(o),onClick:()=>l&&f&&f(),style:{position:"relative"},"data-cg-id":"WARLORD_P2",children:[(0,i.jsx)("div",{className:"cg-name",children:"Seigneur"}),(0,i.jsxs)("div",{className:"cg-stats",children:[s,"/",o]}),"WARLORD_P2"===b&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),k.filter(e=>"WARLORD_P2"===e.id).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key))]})]}),(0,i.jsxs)("div",{className:"cg-row self",children:[t.map(e=>{const t=l&&l.uid===e.uid,n=e.canAttack&&"P1"===g;return(0,i.jsxs)("div",{className:"cg-card ".concat(t?"selected":""," ").concat(n?"can-attack":""),title:"".concat(e.name,"\nATK:").concat(e.atk," PV:").concat(e.hp).concat(e.canAttack?"":"\n(ne peut pas attaquer)"),onClick:()=>n&&d(e),style:(0,r.A)((0,r.A)({},j(e)),{},{transform:x&&x.attackerId===e.uid&&"P1"===x.attackerOwner?"translateY(-18px)":void 0,position:"relative"}),"data-cg-id":e.uid,children:[(0,i.jsx)("div",{className:"cg-name",children:e.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(e.categories||[]).join("/")}),e.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:e.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[e.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),e.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),e.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),e.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsxs)("div",{className:"cg-stats",children:[e.atk,"/",e.hp]}),b===e.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:e.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),k.filter(t=>t.id===e.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),e.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),e.shield&&(0,i.jsx)("div",{className:"fx-shield"}),e.charge&&(0,i.jsx)("div",{className:"fx-charge"}),e.lifesteal&&(0,i.jsx)("div",{className:"fx-life"})]},e.uid)}),(()=>{const e=l&&l.isWarlord,t="P1"===g&&!c,n="P1"===g&&!c;return(0,i.jsxs)("div",{className:"cg-card warlord ".concat(e?"selected":""," ").concat(t?"can-attack":""),title:"Seigneur\nATK:".concat(s," PV:").concat(a).concat(t?"":"\n(d\xe9j\xe0 utilis\xe9)"),onClick:()=>t&&h&&h(),style:{position:"relative"},"data-cg-id":"WARLORD_P1",children:[(0,i.jsx)("div",{className:"cg-name",children:"Seigneur"}),(0,i.jsxs)("div",{className:"cg-stats",children:[s,"/",a]}),"WARLORD_P1"===b&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),k.filter(e=>"WARLORD_P1"===e.id).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),(0,i.jsx)("button",{className:"week-btn",style:{position:"absolute",right:4,bottom:4,padding:"2px 6px",fontSize:10},disabled:!n,onClick:e=>{e.stopPropagation(),m&&m()},title:"Capacit\xe9: 1 \xe9nergie \u2192 pioche 1",children:"1e: Tirer"})]})})()]})]})}function u(e){let{fromId:t,toId:n}=e;const[r,s]=a.useState(null);return a.useEffect(()=>{if(!t||!n)return;const e=document.querySelector('[data-cg-id="'.concat(CSS.escape(t),'"]')),r=document.querySelector('[data-cg-id="'.concat(CSS.escape(n),'"]'));if(!e||!r)return;const a=e.getBoundingClientRect(),i=r.getBoundingClientRect(),o=a.left+a.width/2,c=a.top+a.height/2,l=i.left+i.width/2-o,d=i.top+i.height/2-c,u=Math.hypot(l,d),h=180*Math.atan2(d,l)/Math.PI;s({position:"fixed",left:o,top:c,width:u,height:3,transform:"rotate(".concat(h,"deg)"),transformOrigin:"0 50%",background:"linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.8), rgba(255,255,255,0.0))",pointerEvents:"none",borderRadius:2});const p=setTimeout(()=>s(null),250);return()=>clearTimeout(p)},[t,n]),r?(0,i.jsx)("div",{style:r}):null}}}]);
//# sourceMappingURL=537.dfc94e9d.chunk.js.map