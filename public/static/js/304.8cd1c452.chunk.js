"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[304],{304:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var s=n(43),l=n(924),r=n(104),a=n(579);function i(){var e,t;const[n,i]=(0,s.useState)("lobby"),[o,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),[g,j]=(0,s.useState)(""),v=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=(0,r.io)("/tictactoe",{transports:["websocket"]});return v.current=e,e.on("created",e=>{p(e.mark),u(e.code),x(e.state),i("game")}),e.on("joined",e=>{p(e.mark),u(e.code),x(e.state),i("game")}),e.on("state",e=>x(e)),e.on("room_closed",()=>{j("La partie est termin\xe9e (adversaire parti)."),i("lobby"),p(null),u(""),x(null)}),e.on("error_msg",e=>j(e)),()=>{e.disconnect()}},[]);const b=(0,s.useMemo)(()=>h?"won"===h.status?"Vainqueur: ".concat(h.winner):"draw"===h.status?"Match nul":"Tour: ".concat(h.turn):"",[h]);return"lobby"===n?(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)("h2",{style:{margin:0},children:"Morpion en ligne"}),(0,a.jsx)(l.N_,{className:"week-btn",to:"/games",children:"\u21a9 Retour"})]}),g&&(0,a.jsx)("div",{style:{color:"crimson",margin:"8px 0"},children:g}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:12},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{style:{marginTop:0},children:"Cr\xe9er une partie"}),(0,a.jsxs)("label",{children:["Votre pseudo",(0,a.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Pseudo"})]}),(0,a.jsx)("button",{className:"week-btn",onClick:()=>{j(""),v.current.emit("create",{name:o||"J1"})},children:"Cr\xe9er"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{style:{marginTop:0},children:"Rejoindre une partie"}),(0,a.jsxs)("label",{children:["Votre pseudo",(0,a.jsx)("input",{value:o,onChange:e=>c(e.target.value),placeholder:"Pseudo"})]}),(0,a.jsxs)("label",{children:["Code de salle",(0,a.jsx)("input",{value:d,onChange:e=>u(e.target.value.toUpperCase()),placeholder:"ABCDE"})]}),(0,a.jsx)("button",{className:"week-btn",onClick:()=>{j(""),v.current.emit("join",{code:d,name:o||"J2"})},children:"Rejoindre"})]})]})]}):(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,a.jsx)("h2",{style:{margin:0},children:"Morpion en ligne"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsxs)("span",{className:"pill pill--info",children:["Salle: ",d]}),(0,a.jsx)(l.N_,{className:"week-btn",to:"/games",children:"\u21a9 Menu"})]})]}),h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{marginBottom:8},children:["Vous \xeates: ",(0,a.jsx)("b",{children:m})," \u2014 ",(null===h||void 0===h||null===(e=h.names)||void 0===e?void 0:e.X)||"J1"," (X) vs ",(null===h||void 0===h||null===(t=h.names)||void 0===t?void 0:t.O)||"J2"," (O)"]}),(0,a.jsx)("div",{style:{marginBottom:8,color:"var(--muted)"},children:b}),(0,a.jsx)("div",{role:"grid",style:{display:"grid",gridTemplateColumns:"repeat(3, 100px)",gridTemplateRows:"repeat(3, 100px)",gap:6,marginBottom:10},children:h.board.map((e,t)=>(0,a.jsx)("button",{role:"gridcell",onClick:()=>{return e=t,void(h&&d&&m&&"playing"===h.status&&h.turn===m&&(h.board[e]||v.current.emit("play",{code:d,idx:e,mark:m})));var e},className:"week-btn",style:{width:100,height:100,fontSize:36,fontWeight:800,background:e?"X"===e?"#2563eb":"#10b981":"var(--panel)",borderColor:e?"transparent":"var(--line)",color:e?"#fff":"var(--text)"},children:e||""},t))}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsx)("button",{className:"week-btn",onClick:()=>v.current.emit("reset",{code:d}),children:"Rejouer"}),(0,a.jsx)("button",{className:"week-btn",onClick:()=>{v.current.emit("leave",{code:d}),i("lobby")},children:"Quitter"})]})]})]})}}}]);
//# sourceMappingURL=304.8cd1c452.chunk.js.map