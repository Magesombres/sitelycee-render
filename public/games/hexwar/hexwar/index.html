<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
  <title>Hex War (béta.0,5)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      html, body { height: 100%; margin: 0; font-family: system-ui, sans-serif; }
  #app { display: grid; grid-template-columns: 280px 1fr 280px; height: 100vh; } /* force pleine hauteur */
      #ui { padding: 12px; border-right: 1px solid #ddd; box-sizing: border-box; }
      #canvasWrap { position: relative; background: #f7f7f7; height: 100vh; }   /* hauteur explicite */
      canvas { width: 100%; height: 100%; display: block; background: #fff; user-select: none; }
      .legend { font-size: 12px; color: #666; }
      .pill { padding: 2px 8px; border-radius: 999px; color: #fff; font-weight: 600; }
      .red { background:#e53935; } .blue { background:#1e88e5; }
  #info { padding: 12px; border-left: 1px solid #ddd; box-sizing: border-box; background: #fafafa; }
  #info h3 { margin: 8px 0; }
  #info .row { margin: 6px 0; font-size: 14px; }
  #info .label { color: #666; display: inline-block; min-width: 90px; }
    </style>
  </head>
  <body>
  <div id="app">
      <div id="ui">
  <h2>Hex War — béta.0,5</h2>
        <div class="row">Tour: <span id="turnPill" class="pill red">Rouge</span> — Actions restantes: <b id="actionsLeft">2</b></div>
        <div class="row legend">Or — Rouge: <b id="goldRed">0</b> | Bleu: <b id="goldBlue">0</b></div>
        <div class="row">
          <button id="btnEndTurn">Fin du tour</button>
        </div>
        <div class="row">
          <select id="buildType">
            <option value="outpost">Avant‑poste</option>
            <option value="town">Ville</option>
            <option value="barracks">Caserne</option>
            <option value="factory">Usine</option>
          </select>
          <button id="btnBuild">Construire</button>
        </div>
        <div class="row">
          <select id="terrainType">
            <option value="none">Terrain: Aucun</option>
            <option value="trench">Tranché</option>
            <option value="mountain">Montagne</option>
            <option value="lake">Lac</option>
            <option value="hill">Colline</option>
            <option value="ruins">Ruines</option>
          </select>
          <button id="btnTerrain">Appliquer terrain</button>
        </div>
        <div class="row">
          <button id="btnStrat">Stratagème (Ralliement)</button>
          <button id="btnRaise">Stratagème (Lévée de troupe)</button>
        </div>
        <div id="confirmBar" class="row" style="display:none; gap:8px; align-items:center; margin-top:8px;">
          <span id="confirmText">Confirmer l’action ?</span>
          <button id="btnConfirm">Confirmer</button>
          <button id="btnCancel">Annuler</button>
        </div>
        <div id="msg" class="row legend">But: capturer la carte (8×8 hex).</div>
        <div class="row legend">
          Règles:
          <ul>
            <li>2 actions par tour (Rouge puis Bleu).</li>
            <li>Cliquer une de vos unités, puis cliquer un hex voisin: déplacement/attaque/merge.</li>
            <li>Entrer dans un hex libre le capture. Rejoindre une unité alliée fusionne l’armée.</li>
            <li>Construire sur un hex contrôlé, sans bâtiment (autorisé même si une unité alliée est dessus).</li>
            <li>Stratagèmes (1 par tour):
              <ul>
                <li>Ralliement: +1 force à l’unité sélectionnée (max 9).</li>
                <li>Lévée de troupe: crée une unité force 1 sur une Ville ou une Caserne alliée (si libre).</li>
              </ul>
            </li>
            <li>Bâtiments:
              <ul>
                <li>Avant‑poste: bonus défensif (+0,5) pour l’unité qui défend dessus.</li>
                <li>Ville: génère de l’or à la fin de votre tour.</li>
                <li>Caserne: permet de lever des troupes.</li>
                <li>Usine: génère de l’or selon le nombre de Villes adjacentes alliées.</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
      <div id="canvasWrap">
        <canvas id="board" width="1024" height="768"></canvas>
      </div>
      <div id="info">
      <h3>Infos</h3>
      <div class="row"><span class="label">Case</span> <span id="infoHex">—</span></div>
      <div class="row"><span class="label">Proprio</span> <span id="infoOwner">—</span></div>
      <div class="row"><span class="label">Terrain</span> <span id="infoTerrain">—</span></div>
      <div class="row"><span class="label">Bâtiment</span> <span id="infoBuilding">—</span></div>
      <hr />
      <div class="row"><span class="label">Armée</span> <span id="infoArmyOwner">—</span></div>
      <div class="row"><span class="label">Effectif</span> <span id="infoArmyCount">—</span></div>
      <div class="row"><span class="label">Composition</span> <span id="infoArmyComp">—</span></div>
      <div class="row"><span class="label">PV totaux</span> <span id="infoArmyHP">—</span></div>
      <div class="row"><span class="label">Portée max</span> <span id="infoArmyRange">—</span></div>
      <div class="row"><span class="label">Attaque</span> <span id="infoArmyAtk">—</span></div>
      </div>
    </div>
    <!-- Menu principal overlay -->
    <style>
      #menuOverlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10; }
      #menuPanel { background: #fff; border-radius: 12px; padding: 24px; width: 320px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); text-align: center; }
      #menuPanel h1 { margin: 0 0 12px; font-size: 22px; }
      #menuPanel .btns { display: grid; gap: 8px; margin-top: 12px; }
      #menuPanel button { padding: 10px 12px; font-weight: 600; }
      #menuPanel .hint { color: #666; font-size: 12px; margin-top: 8px; }
    </style>
    <div id="menuOverlay">
      <div id="menuPanel">
  <h1>Hex War — béta.0,5</h1>
        <div>Choisissez un mode de jeu</div>
        <div class="btns">
          <button id="btnPlayBot">Jouer avec un bot</button>
          <button id="btnPlayMulti" disabled>Jouer en multi (bientôt)</button>
        </div>
        <div class="hint">Les terrains seront appliqués automatiquement au démarrage.</div>
      </div>
    </div>
    <script type="module" src="./main.js"></script>
  </body>
</html>

