"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[537],{537:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(555),a=n(43),i=n(579);const s=2;function o(e){const t=[{id:"c1",name:"Soldat",cost:1,atk:1,hp:2,categories:["Empire","Infanterie"],faction:"Empire",effect:""},{id:"c2",name:"Archer",cost:2,atk:2,hp:2,charge:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Charge"},{id:"c3",name:"Garde",cost:2,atk:1,hp:4,taunt:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Provocation"},{id:"c4",name:"Champion",cost:3,atk:3,hp:3,shield:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Bouclier"},{id:"c5",name:"Berserker",cost:4,atk:5,hp:2,lifesteal:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Vol de vie"},{id:"c6",name:"Paladin",cost:5,atk:4,hp:5,lifesteal:!0,categories:["Empire","Infanterie"],faction:"Empire",effect:"Vol de vie"}],n=[];for(let a=0;a<3;a++)t.forEach(t=>n.push((0,r.A)((0,r.A)({},t),{},{uid:e+"_"+t.id+"_"+a+"_"+Math.random().toString(36).slice(2,7)})));for(let r=n.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[n[r],n[e]]=[n[e],n[r]]}return n}function l(){const[e,t]=(0,a.useState)("home"),n=(0,a.useRef)(null),l=(0,a.useRef)([]),u=(0,a.useRef)(!1),p=(0,a.useRef)(null),h=(0,a.useRef)(null),[f,g]=(0,a.useState)(null),[x,m]=(0,a.useState)(0),[b,v]=(0,a.useState)({name:"Vous",hp:20,deck:o("P1"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur"}),[y,j]=(0,a.useState)({name:"IA",hp:20,deck:o("P2"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur IA"}),[k,A]=(0,a.useState)("P1"),[w,P]=(0,a.useState)([]),[R,S]=(0,a.useState)(null),[N,T]=(0,a.useState)(null),[W,I]=(0,a.useState)(0),[C,z]=(0,a.useState)(null),[E,D]=(0,a.useState)(null),[V,O]=(0,a.useState)([]),[L,_]=(0,a.useState)(!1),[M,U]=(0,a.useState)(null),[q,F]=(0,a.useState)("right"),[B,X]=(0,a.useState)(null),[K,H]=(0,a.useState)(null),J=(0,a.useRef)(b),Y=(0,a.useRef)(y),G=(0,a.useRef)(k),Q=(0,a.useRef)(N);function Z(){n.current&&(clearTimeout(n.current),n.current=null),l.current&&l.current.length&&(l.current.forEach(e=>clearTimeout(e)),l.current=[])}function $(e,t){const n=setTimeout(e,t);return l.current.push(n),n}function ee(){p.current&&(clearTimeout(p.current),p.current=null),h.current&&(clearInterval(h.current),h.current=null),Z(),g(null),m(0)}function te(e){P(t=>[e,...t.slice(0,49)])}function ne(e,t){"P1"===e?v(e=>{const n=(0,r.A)((0,r.A)({},e),t(e));return J.current=n,n}):j(e=>{const n=(0,r.A)((0,r.A)({},e),t(e));return Y.current=n,n})}function re(e){return"P1"===e?b:y}function ae(e){return"P1"===e?J.current:Y.current}function ie(){return G.current}function se(){return Q.current}function oe(e){return"P1"===e?"P2":"P1"}function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=re(e),r=n.deck.length,a=Math.min(t,r),i=t-a,s=n.fatigue||0;let o=0;for(let l=1;l<=i;l++)o+=s+l;ne(e,e=>{const t=[...e.deck],n=t.splice(0,a);return{deck:t,hand:[...e.hand,...n],fatigue:(e.fatigue||0)+i,hp:e.hp-o}}),i>0&&(te("[Fatigue] ".concat(n.name," subit ").concat(o," d\xe9g\xe2t(s) (pioche impossible)")),setTimeout(()=>pe(),0))}function de(e){if(se())return;if(ie()!==e)return;const t=re(e);t.warlordUsed||(t.energy<1?te("[Seigneur] Pas assez d'\xe9nergie."):(ne(e,e=>({energy:e.energy-1,warlordUsed:!0})),le(e,1),te("[Seigneur] ".concat(t.name," utilise sa capacit\xe9: pioche 1 (co\xfbt 1)"))))}function ce(e){S(null),A(e),I(t=>t+("P1"===e?1:0)),ne(e,e=>{const t=Math.min(10,e.maxEnergy+1);return{energy:t,maxEnergy:t,warlordUsed:!1,field:e.field.map(e=>(0,r.A)((0,r.A)({},e),{},{canAttack:!0}))}}),le(e,1),te("[Tour] ".concat(re(e).name)),Z(),p.current&&(clearTimeout(p.current),p.current=null);const t=("P1"===e?W+1:W)>=6?6e4:3e4,a=Date.now()+t;g(a),te("[Timer] ".concat(re(e).name,": ").concat(Math.round(t/1e3),"s")),m(0),h.current&&(clearInterval(h.current),h.current=null),h.current=setInterval(()=>{m(e=>{const n=Date.now(),r=Math.max(0,a-n);return Math.min(1,1-r/t)})},100),p.current=setTimeout(()=>{N||k!==e||(te("[Timer] Fin automatique du tour de ".concat(re(e).name)),he(e))},t),"P2"===e&&(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>function(){if(se())return;const e=ae("P2");te("[IA] R\xe9flexion\u2026"),!e.warlordUsed&&e.energy>=1&&e.hand.length<=4&&de("P2");const t=e=>2*e.atk+e.hp+(e.taunt?2:0)+(e.shield?1.5:0)+(e.charge?1:0)+(e.lifesteal?1.5:0);let n=e.energy,a=[...e.hand];const i=[];for(;;){if(Math.max(0,8-ae("P2").field.length-i.length)<=0)break;const e=n,r=a.filter(t=>t.cost<=e);if(!r.length)break;r.sort((e,n)=>t(n)-t(e)||n.cost-e.cost);const s=r[0];if(i.push(s),n-=s.cost,a=a.filter(e=>e.uid!==s.uid),i.length>10)break}const o=400,l=Math.max(0,8-ae("P2").field.length),d=i.slice(0,l);d.forEach((e,t)=>{$(()=>{se()||"P2"!==ie()||(ne("P2",t=>t.hand.find(t=>t.uid===e.uid)?{hand:t.hand.filter(t=>t.uid!==e.uid),field:[...t.field,(0,r.A)((0,r.A)({},e),{},{canAttack:!!e.charge})],energy:t.energy-e.cost}:t),te("[IA] Invoque ".concat(e.name)))},t*o)});$(()=>{if(se()||"P2"!==ie())return void te("[IA] Annul\xe9: tour=".concat(ie()," winner=").concat(!!se()));const e=[],t=ae("P2"),n=t.field.filter(e=>e.canAttack);te("[IA] Pr\xe9pare ".concat(n.length," attaquant(s)")),0===n.length&&(t.warlordUsed||s<=0)&&te("[IA] Aucune attaque possible.");const r=(e,t)=>t.shield?0:e.atk;for(const s of n){const t=ae("P1").field,n=t.filter(e=>e.taunt),a=n.length?n:t;if(a.length){const t=a.filter(e=>!e.shield&&s.atk>=e.hp),n=t.filter(e=>s.hp-r(e,s)>0);let i;i=n.length?[...n].sort((e,t)=>t.atk-e.atk)[0]:t.length?[...t].sort((e,t)=>t.atk-e.atk)[0]:[...a].sort((e,t)=>t.atk-e.atk)[0],e.push(["P2","creature",s.uid,"creature",i.uid])}else e.push(["P2","creature",s.uid,"warlord"])}if(!se()&&"P2"===ie()&&!ae("P2").warlordUsed&&s>0){const t=ae("P1").field,n=t.filter(e=>e.taunt),r=n.length?n:t;if(r.length){const t=r.filter(e=>!e.shield&&s>=e.hp),n=t.length?[...t].sort((e,t)=>t.atk-e.atk)[0]:[...r].sort((e,t)=>t.atk-e.atk)[0];e.push(["P2","warlord","WARLORD_P2","creature",n.uid])}else e.push(["P2","warlord","WARLORD_P2","warlord"])}const a=350;e.forEach((e,t)=>$(()=>ue(...e),t*a));const i=e.length*a+450;te("[IA] ".concat(e.length," action(s) d'attaque.")),0===e.length?se()||"P2"!==ie()||(te("[IA] Fin de tour (aucune action)"),he("P2")):$(()=>{se()||"P2"!==ie()||he("P2")},i)},d.length?d.length*o+250:200)}(),300),$(()=>{if(se()||"P2"!==ie())return;const e=ae("P2"),t=e.field.filter(e=>e.canAttack),n=!e.warlordUsed&&s>0;0!==t.length||n||(te("[IA] Failsafe: fin de tour"),he("P2"))},1200))}function ue(e,t,n,a,i){if(se())return;if(ie()!==e)return;const o="warlord"===t?"WARLORD_".concat(e):n,l="warlord"===a?"WARLORD_".concat(oe(e)):i;z({attackerId:o,attackerOwner:e,targetId:l,targetKind:a}),U({fromOwner:e,fromId:o,toId:l,ts:Date.now()});const d=ae(e),c=oe(e),u=ae(c);let p=[];if("creature"===t&&"creature"===a){const t=(d.field||[]).find(e=>e.uid===n),r=(u.field||[]).find(e=>e.uid===i);if(t&&r){const n=r.shield?0:t.atk,a=t.shield?0:r.atk;n>0&&p.push({id:r.uid,amount:n,owner:c}),a>0&&p.push({id:t.uid,amount:a,owner:e})}}else if("creature"===t&&"warlord"===a){const t=(d.field||[]).find(e=>e.uid===n);if(t){const n=t.atk,r=t.shield?0:s;n>0&&p.push({id:"WARLORD_".concat(c),amount:n,owner:c}),r>0&&p.push({id:t.uid,amount:r,owner:e})}}else if("warlord"===t&&"creature"===a){const t=(u.field||[]).find(e=>e.uid===i);if(t){const n=t.shield?0:s,r=t.atk;n>0&&p.push({id:t.uid,amount:n,owner:c}),r>0&&p.push({id:"WARLORD_".concat(e),amount:r,owner:e})}}else"warlord"===t&&"warlord"===a&&s>0&&(p.push({id:"WARLORD_".concat(c),amount:s,owner:c}),p.push({id:"WARLORD_".concat(e),amount:s,owner:e}));let h=[];setTimeout(()=>{if(se()||ie()!==e)return;l&&D(l),p.length&&(h=p.map((e,t)=>(0,r.A)((0,r.A)({},e),{},{key:"".concat(Date.now(),"_").concat(t)})),O(e=>[...e,...h].slice(-12)),h.some(e=>e.amount>=4)&&(_(!0),setTimeout(()=>_(!1),120))),"warlord"===t&&"warlord"===a?function(e){const t=oe(e),n=re(e),r=re(t);if(n.warlordUsed||k!==e)return;ne(t,e=>({hp:e.hp-s})),ne(e,e=>({hp:e.hp-s})),ne(e,e=>({warlordUsed:!0})),te("[Seigneur] ".concat(n.name," attaque ").concat(r.name," pour ").concat(s," (riposte ").concat(s,")")),pe()}(e):"warlord"===t&&"creature"===a?function(e,t){const n=oe(e),a=re(e),i=re(n);if(a.warlordUsed||k!==e)return;const o=i.field.find(e=>e.uid===t);if(!o)return;const l=s,d=o.atk;ne(n,e=>({field:e.field.map(e=>{if(e.uid!==t)return e;const n=!(e.shield&&l>0)&&e.shield,a=e.shield?0:l;return(0,r.A)((0,r.A)({},e),{},{hp:e.hp-a,shield:n})}).filter(e=>e.hp>0)})),ne(e,e=>({hp:e.hp-d,warlordUsed:!0})),te("[Seigneur] ".concat(a.name," frappe une cr\xe9ature (").concat(l,") et subit ").concat(d," en riposte")),pe()}(e,i):"creature"===t&&"warlord"===a?function(e,t){const n=oe(e),a=re(e),i=re(n),o=a.field.find(e=>e.uid===t);if(!o||!o.canAttack)return;const l=o.atk,d=i.hp,c=Math.max(0,Math.min(l,d));ne(n,e=>({hp:e.hp-l})),ne(e,e=>{const n=o.lifesteal?c:0,a=e.field.map(e=>{if(e.uid!==t)return e;const n=!(s>0&&e.shield)&&e.shield,a=e.shield?0:s,i=e.hp-a;return(0,r.A)((0,r.A)({},e),{},{canAttack:!1,shield:n,hp:i})}).filter(e=>e.hp>0);return{hp:e.hp+n,field:a}}),te("[Attaque] ".concat(a.name," (").concat(o.name,") inflige ").concat(l," \xe0 ").concat(i.name)),s>0&&te("[Seigneur] Riposte et inflige ".concat(s," \xe0 l'attaquant"));pe()}(e,n):function(e,t,n){const a=oe(e),i=re(e),s=re(a),o=i.field.find(e=>e.uid===t),l=s.field.find(e=>e.uid===n);if(!o||!l||!o.canAttack)return;const d=o.atk,c=l.atk,u=l.shield?0:d;ne(e,e=>{const n=e.field.map(e=>{if(e.uid!==t)return e;const n=!(c>0&&e.shield)&&e.shield,a=e.hp-(e.shield?0:c);return(0,r.A)((0,r.A)({},e),{},{hp:a,canAttack:!1,shield:n})}).filter(e=>e.hp>0),a=o.lifesteal?u:0;return{field:n,hp:e.hp+a}}),ne(a,e=>({field:e.field.map(e=>{if(e.uid!==n)return e;const t=!(d>0&&e.shield)&&e.shield,a=e.hp-(e.shield?0:d);return(0,r.A)((0,r.A)({},e),{},{hp:a,shield:t})}).filter(e=>e.hp>0)})),te("[Combat] ".concat(o.name," (").concat(d,") \u2194 ").concat(l.name," (").concat(c,")")),pe()}(e,n,i),setTimeout(()=>D(null),260);const o=h.map(e=>e.key);setTimeout(()=>O(e=>e.filter(e=>!o.includes(e.key))),700)},180),setTimeout(()=>z(null),600),setTimeout(()=>U(null),320)}function pe(){var e,t,n,a;if(se())return;const i=null!==(e=null===(t=J.current)||void 0===t?void 0:t.hp)&&void 0!==e?e:b.hp,s=null!==(n=null===(a=Y.current)||void 0===a?void 0:a.hp)&&void 0!==n?n:y.hp;if(i<=0&&s<=0)T("\xc9galit\xe9"),ee();else if(i<=0){var o;K||H("WARLORD_P1"),setTimeout(()=>ne("P1",e=>(0,r.A)((0,r.A)({},e),{},{field:[]})),150),setTimeout(()=>H(null),1200),T((null===(o=Y.current)||void 0===o?void 0:o.name)||y.name),ee()}else if(s<=0){var l;K||H("WARLORD_P2"),setTimeout(()=>ne("P2",e=>(0,r.A)((0,r.A)({},e),{},{field:[]})),150),setTimeout(()=>H(null),1200),T((null===(l=J.current)||void 0===l?void 0:l.name)||b.name),ee()}}function he(e){if(se())return;ie()===e&&(te("[Tour] Fin ".concat(e," \u2192 ").concat(oe(e))),Z(),p.current&&(clearTimeout(p.current),p.current=null),h.current&&(clearInterval(h.current),h.current=null),g(null),m(0),ce(oe(e)))}function fe(){ee(),H(null),v({name:"Vous",hp:20,deck:o("P1"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur"}),j({name:"IA",hp:20,deck:o("P2"),hand:[],field:[],energy:0,maxEnergy:0,fatigue:0,warlordUsed:!1,warlordName:"Seigneur IA"}),S(null),D(null),O([]),_(!1),T(null),P([]),A("P1"),I(0),setTimeout(()=>{le("P1",3),le("P2",3),ce("P1")},100)}(0,a.useEffect)(()=>{J.current=b},[b]),(0,a.useEffect)(()=>{Y.current=y},[y]),(0,a.useEffect)(()=>{G.current=k},[k]),(0,a.useEffect)(()=>{Q.current=N},[N]),(0,a.useEffect)(()=>{"battle"!==e||u.current||0!==b.hand.length||0!==y.hand.length||(u.current=!0,le("P1",3),le("P2",3),ce("P1"))},[e]),(0,a.useEffect)(()=>()=>{Z(),p.current&&(clearTimeout(p.current),p.current=null),h.current&&(clearInterval(h.current),h.current=null)},[]);const ge=b,xe=y,me=()=>(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",borderTop:"1px solid var(--line)",paddingTop:8,marginTop:12},children:[(0,i.jsx)("button",{className:"week-btn ".concat("deck"===e?"primary":""),onClick:()=>t("deck"),children:"Cr\xe9ez son deck"}),(0,i.jsx)("button",{className:"week-btn ".concat("shop"===e?"primary":""),onClick:()=>t("shop"),children:"Boutique (dev)"}),(0,i.jsx)("button",{className:"week-btn ".concat("home"===e?"primary":""),onClick:()=>t("home"),children:"Home"}),(0,i.jsx)("button",{className:"week-btn ".concat("event"===e?"primary":""),onClick:()=>t("event"),children:"Event (dev)"}),(0,i.jsx)("button",{className:"week-btn ".concat("clan"===e?"primary":""),onClick:()=>t("clan"),children:"Clan (dev)"})]});return"battle"!==e?(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{style:{padding:12},children:[(0,i.jsx)("style",{children:"\n            @keyframes cg-float { from { transform: translate(-50%, 0); opacity: 1; } to { transform: translate(-50%, -18px); opacity: 0; } }\n            .cg-arena.shake { animation: cg-shake 120ms ease; }\n          "}),(0,i.jsx)("h2",{style:{marginTop:0},children:"Jeu de cartes"}),(0,i.jsx)("p",{style:{color:"var(--muted)",marginTop:-6},children:"Un prototype rapide de combat au tour par tour."}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)("button",{className:"week-btn primary",onClick:()=>{n.current&&(clearTimeout(n.current),n.current=null),u.current=!0,t("battle"),fe()},children:"Lancez un combat (IA)"})}),(0,i.jsx)(me,{}),"deck"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Cr\xe9ation de deck"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"\xc0 venir: \xe9diteur pour composer votre deck personnalis\xe9."})]}),"shop"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Boutique (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Prototype: packs de cartes, cosm\xe9tiques, etc."})]}),"event"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"\xc9v\xe9nements (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Saisons, d\xe9fis hebdo, classements\u2026"})]}),"clan"===e&&(0,i.jsxs)("div",{className:"card",style:{marginTop:12},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"Clans (dev)"}),(0,i.jsx)("p",{style:{color:"var(--muted)"},children:"Rejoignez un clan, missions et bonus coop."})]})]})}):(0,i.jsxs)("div",{className:"cardgame-root",children:[(0,i.jsx)("style",{children:"\n        @keyframes cg-float { from { transform: translate(-50%, 0); opacity: 1; } to { transform: translate(-50%, -18px); opacity: 0; } }\n        .cg-arena.shake { animation: cg-shake 120ms ease; }\n        @keyframes cg-shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }\n        /* Ability overlays */\n        @keyframes fx-pulse { 0% { opacity: 0.35; } 50% { opacity: 0.9; } 100% { opacity: 0.35; } }\n        @keyframes fx-shimmer { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }\n        .fx-taunt { position:absolute; inset:-2px; border:2px solid rgba(255,165,0,0.85); border-radius:8px; box-shadow: 0 0 10px rgba(255,165,0,0.6); animation: fx-pulse 1.2s infinite ease-in-out; pointer-events:none; }\n        .fx-shield { position:absolute; inset:-2px; border-radius:8px; border:2px solid rgba(41,128,185,0.9); box-shadow: 0 0 10px rgba(41,128,185,0.6); overflow:hidden; pointer-events:none; }\n        .fx-shield::after { content:''; position:absolute; inset:-2px; background: linear-gradient(90deg, rgba(255,255,255,0), rgba(41,128,185,0.25), rgba(255,255,255,0)); background-size: 200% 100%; animation: fx-shimmer 1.2s linear infinite; }\n        .fx-charge { position:absolute; inset:-2px; border-radius:8px; box-shadow: inset 0 0 10px rgba(231,76,60,0.6); animation: fx-pulse 0.9s infinite ease-in-out; pointer-events:none; }\n        .fx-life { position:absolute; bottom:-2px; left:-2px; right:-2px; height:4px; border-radius:0 0 8px 8px; background: rgba(46,204,113,0.9); animation: fx-pulse 1.5s infinite ease-in-out; pointer-events:none; }\n        /* Explosion FX */\n        @keyframes fx-boom { 0% { transform: scale(0.5); opacity: 0.9; } 60% { transform: scale(1.25); opacity: 0.7; } 100% { transform: scale(1.6); opacity: 0; } }\n        .fx-explosion { position:absolute; inset:-6px; border-radius:10px; pointer-events:none; background: radial-gradient(circle, rgba(255,200,80,0.95) 0%, rgba(255,120,0,0.55) 35%, rgba(255,0,0,0.3) 60%, rgba(255,0,0,0) 70%); animation: fx-boom 0.9s ease-out forwards; box-shadow: 0 0 30px rgba(255,120,0,0.7), 0 0 60px rgba(255,80,0,0.45); }\n        .fx-explosion::after { content:''; position:absolute; inset:0; border-radius:10px; box-shadow: 0 0 0 2px rgba(255,255,255,0.35) inset; }\n      "}),(0,i.jsx)("div",{className:"cg-top",children:(0,i.jsx)(d,{player:xe,isSelf:!1,turn:k,onCardClick:()=>{},selectable:!1,highlightAttacker:null})}),(0,i.jsx)(c,{p1Field:ge.field,p2Field:xe.field,p1Hp:ge.hp,p2Hp:xe.hp,p1WarlordUsed:ge.warlordUsed,attackAnim:C,impactId:E,damageAnims:V,shake:L,projectile:M,warlordExplosion:K,turn:k,pendingPlayUid:B,onPlaceAt:function(e){if("P1"!==k||N)return;if(!B&&0!==B)return;const t=re("P1"),n=t.hand.find(e=>e.uid===B);if(!n)return void X(null);if(t.energy<n.cost)return te("[Jeu] Plus assez d'\xe9nergie."),void X(null);if(t.field.length>=8)return te("[Limite] Vous avez d\xe9j\xe0 8 troupes en jeu."),void X(null);const a=Math.max(0,Math.min(7,0|e));ne("P1",e=>{const t=e.hand.filter(e=>e.uid!==B),i=e.field.map(e=>(0,r.A)({},e)),s=Array(8).fill(null);let o=0;for(const n of i){let e=Number.isInteger(n.slot)?n.slot:o++;for(e<0&&(e=0),e>7&&(e=7);e<=7&&s[e];)e++;e<=7&&(s[e]=n,n.slot=e)}const l=(0,r.A)((0,r.A)({},n),{},{canAttack:!!n.charge,slot:a});if(s[a]){let t=a<=3?-1:1,n=a;for(;n>=0&&n<8&&s[n];)n+=t;if(n<0||n>7){for(t=-t,n=a;n>=0&&n<8&&s[n];)n+=t;if(n<0||n>7)return te("[Limite] Aucune place disponible pour pousser."),e}for(let e=n;e!==a;e-=t){const n=e-t;s[e]=s[n],s[e]&&(s[e].slot=e)}s[a]=l}else s[a]=l;return{hand:t,field:s.filter(Boolean),energy:e.energy-n.cost}}),te("[Jeu] ".concat(n.name," plac\xe9 en case ").concat(e+1)),X(null)},selectedAttacker:R,onSelectAttacker:e=>function(e,t){N||k===t&&e.canAttack&&"P1"===k&&(R&&R.uid===e.uid?S(null):S(e))}(e,"P1"),onSelectWarlord:()=>{"P1"!==k||ge.warlordUsed||(null!==R&&void 0!==R&&R.isWarlord?S(null):S({uid:"WARLORD_P1",isWarlord:!0,atk:s,canAttack:!0}))},onWarlordAbility:()=>de("P1"),onAttackCard:e=>{if(!R)return;const t=xe.field.some(e=>e.taunt),n=xe.field.find(t=>t.uid===e);t&&n&&!n.taunt?te("[R\xe8gle] Vous devez cibler une cr\xe9ature avec Provocation."):(R.isWarlord?ue("P1","warlord","WARLORD_P1","creature",e):ue("P1","creature",R.uid,"creature",e),S(null))},onAttackWarlord:()=>{if(!R)return;xe.field.some(e=>e.taunt)?te("[R\xe8gle] Une Provocation bloque le Seigneur."):(R.isWarlord?ue("P1","warlord","WARLORD_P1","warlord"):ue("P1","creature",R.uid,"warlord"),S(null))}}),(0,i.jsxs)("div",{className:"cg-hand-area",children:[(0,i.jsx)(d,{player:ge,isSelf:!0,turn:k,onCardClick:function(e){if("P1"!==k||N)return;const t=re("P1"),n=t.hand.find(t=>t.uid===e);n&&(t.energy<n.cost?te("[Jeu] Pas assez d'\xe9nergie pour ".concat(n.name)):t.field.length>=8?te("[Limite] Vous avez d\xe9j\xe0 8 troupes en jeu."):(X(e),te("[Jeu] Choisissez une case pour ".concat(n.name))))},selectable:!0,highlightAttacker:null===R||void 0===R?void 0:R.uid,onAttackPlayer:()=>{}}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:12,color:"var(--muted)"},children:"Placement:"}),(0,i.jsx)("button",{className:"week-btn ".concat("left"===q?"primary":""),onClick:()=>F("left"),children:"Gauche"}),(0,i.jsx)("button",{className:"week-btn ".concat("right"===q?"primary":""),onClick:()=>F("right"),children:"Droite"}),(0,i.jsxs)("span",{style:{fontSize:12,color:"var(--muted)"},children:["Limite: ",ge.field.length,"/8"]})]})]}),(0,i.jsxs)("div",{className:"cg-sidebar",children:[(0,i.jsxs)("div",{className:"cg-panel",children:[(0,i.jsx)("h3",{style:{margin:"0 0 6px"},children:"Statut"}),(0,i.jsxs)("div",{children:["Tour: ","P1"===k?"Vous":"IA"," (#",W,")"]}),(0,i.jsxs)("div",{children:["Votre PV: ",ge.hp]}),(0,i.jsxs)("div",{children:["IA PV: ",xe.hp]}),(0,i.jsxs)("div",{children:["\xc9nergie: ",ge.energy,"/",ge.maxEnergy]}),(0,i.jsxs)("div",{children:["Deck: ",ge.deck.length]}),(0,i.jsxs)("div",{children:["IA Deck: ",xe.deck.length]}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",gap:10,alignItems:"center"},children:[(0,i.jsxs)("div",{style:{position:"relative",width:64,height:64,flex:"0 0 auto"},title:f?"".concat(Math.max(0,Math.ceil((f-Date.now())/1e3)),"s restantes"):"",children:[(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:"50%",background:"conic-gradient(var(--accent) ".concat(Math.round(360*(x||0)),"deg, rgba(0,0,0,0.1) 0deg)")}}),(0,i.jsx)("div",{style:{position:"absolute",inset:6,borderRadius:"50%",background:"var(--card)"}}),(0,i.jsx)("button",{className:"week-btn",disabled:N||"P1"!==k,onClick:function(){N||(Z(),p.current&&(clearTimeout(p.current),p.current=null),h.current&&(clearInterval(h.current),h.current=null),g(null),m(0),ce(oe(k)))},style:{position:"absolute",inset:12,borderRadius:"50%",width:"auto",height:"auto",padding:"6px 8px"},children:"Fin"}),f&&(0,i.jsxs)("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",fontSize:12,fontWeight:600,color:"var(--muted)"},children:[Math.max(0,Math.ceil((f-Date.now())/1e3)),"s"]})]}),(0,i.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:"P1"===k?"Votre tour":"Tour IA"}),(0,i.jsx)("button",{className:"week-btn",onClick:fe,children:"Rejouer"})]}),N&&(0,i.jsxs)("div",{style:{marginTop:8,fontWeight:600},children:["Victoire: ",N]})]}),(0,i.jsxs)("div",{className:"cg-panel",children:[(0,i.jsx)("h4",{style:{margin:"0 0 6px"},children:"Capacit\xe9s"}),(0,i.jsxs)("ul",{style:{paddingLeft:16,margin:0,fontSize:12,lineHeight:1.5},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Provocation"}),": doit \xeatre attaqu\xe9e en priorit\xe9. Emp\xeache d'attaquer le h\xe9ros."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Charge"}),": peut attaquer le tour o\xf9 elle est invoqu\xe9e."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Bouclier"}),": ignore la prochaine source de d\xe9g\xe2ts re\xe7us."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Vol de vie"}),": soigne votre h\xe9ros \xe0 hauteur des d\xe9g\xe2ts inflig\xe9s."]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Fatigue"}),": piocher sans cartes inflige des d\xe9g\xe2ts croissants."]})]})]}),(0,i.jsxs)("div",{className:"cg-panel",style:{maxHeight:240,overflowY:"auto"},children:[(0,i.jsx)("h4",{style:{margin:"0 0 6px"},children:"Journal"}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:12},children:w.map((e,t)=>(0,i.jsx)("li",{style:{marginBottom:2},children:e},t))})]})]}),N&&(0,i.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.65)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,i.jsxs)("div",{className:"card",style:{padding:24,textAlign:"center",minWidth:280},children:[(0,i.jsx)("h2",{style:{marginTop:0},children:"\xc9galit\xe9"===N?"\xc9galit\xe9":"Victoire: ".concat(N)}),(0,i.jsx)("div",{style:{marginTop:12},children:(0,i.jsx)("button",{className:"week-btn primary",onClick:fe,children:"Rejouer"})})]})})]})}function d(e){let{player:t,isSelf:n,onCardClick:a,selectable:s,highlightAttacker:o,onAttackPlayer:l}=e;const d=e=>{let t="0 1px 3px rgba(0,0,0,0.25)";return e.taunt&&(t+=", 0 0 8px rgba(255,165,0,0.45)"),e.shield&&(t+=", 0 0 8px rgba(52,152,219,0.45)"),e.lifesteal&&(t+=", 0 0 8px rgba(46,204,113,0.45)"),e.charge&&(t+=", 0 0 8px rgba(231,76,60,0.45)"),{boxShadow:t,transition:"transform 120ms ease, box-shadow 200ms ease"}};return(0,i.jsxs)("div",{className:"cg-player ".concat(n?"self":"opp"),children:[(0,i.jsxs)("div",{className:"cg-player-header",children:[(0,i.jsx)("strong",{children:t.name})," \u2014 PV ",t.hp," \u2014 \xc9nergie ",t.energy,"/",t.maxEnergy]}),(0,i.jsxs)("div",{className:"cg-hand",children:[t.hand.map(e=>(0,i.jsxs)("div",{className:"cg-card small",title:"".concat(e.name,"\nCo\xfbt:").concat(e.cost," ATK:").concat(e.atk," PV:").concat(e.hp),onClick:()=>s&&n&&a(e.uid),style:(0,r.A)((0,r.A)({},d(e)),{},{position:"relative"}),children:[(0,i.jsx)("div",{className:"cg-cost",children:e.cost}),(0,i.jsx)("div",{className:"cg-name",children:e.name}),(0,i.jsx)("div",{style:{fontSize:9,color:"var(--muted)"},children:(e.categories||[]).join("/")}),e.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:e.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[e.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),e.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),e.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),e.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"1px 4px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:11,fontWeight:700},children:e.atk}),(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"1px 4px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:11,fontWeight:700},children:e.hp})]},e.uid)),!t.hand.length&&(0,i.jsx)("div",{style:{color:"var(--muted)",fontSize:12},children:"Main vide"})]})]})}function c(e){let{p1Field:t,p2Field:n,p1Hp:a,p2Hp:o,p1WarlordUsed:l,selectedAttacker:d,onSelectAttacker:c,onSelectWarlord:p,onAttackCard:h,onAttackWarlord:f,onWarlordAbility:g,turn:x,attackAnim:m,impactId:b,damageAnims:v,shake:y,projectile:j,pendingPlayUid:k,onPlaceAt:A,warlordExplosion:w}=e;const P=e=>{let t="0 1px 3px rgba(0,0,0,0.25)";return e.taunt&&(t+=", 0 0 8px rgba(255,165,0,0.45)"),e.shield&&(t+=", 0 0 8px rgba(52,152,219,0.45)"),e.lifesteal&&(t+=", 0 0 8px rgba(46,204,113,0.45)"),e.charge&&(t+=", 0 0 8px rgba(231,76,60,0.45)"),{boxShadow:t,transition:"transform 160ms ease, box-shadow 200ms ease"}};return(0,i.jsxs)("div",{className:"cg-arena".concat(y?" shake":""),children:[j&&(0,i.jsx)(u,{fromId:j.fromId,toId:j.toId}),(0,i.jsxs)("div",{className:"cg-row opp",children:[(()=>{const e=Array(8).fill(null);let t=0;for(const r of n){let n=Number.isInteger(r.slot)?r.slot:t++;for(n<0&&(n=0),n>7&&(n=7);n<=7&&e[n];)n++;n<=7&&(e[n]=r)}return Array.from({length:4}).map((t,n)=>{const a=e[n];return(0,i.jsxs)("div",{className:"cg-card",title:a?"".concat(a.name,"\nATK:").concat(a.atk," PV:").concat(a.hp):"Emplacement ".concat(n+1),onClick:()=>d&&a&&h(a.uid),style:(0,r.A)((0,r.A)({},P(a||{})),{},{position:"relative",transform:m&&a&&m.attackerId===a.uid&&"P2"===m.attackerOwner?"translateY(18px)":void 0}),"data-cg-id":a?a.uid:void 0,children:[a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cg-name",children:a.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(a.categories||[]).join("/")}),a.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:a.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[a.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),a.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),a.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),a.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:a.atk}),(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:a.hp})]}):(0,i.jsx)("div",{style:{opacity:.35,fontSize:10,color:"var(--muted)"},children:"Vide"}),a&&b===a.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:a.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),a&&v.filter(e=>e.id===a.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),a&&a.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),a&&a.shield&&(0,i.jsx)("div",{className:"fx-shield"}),a&&a.charge&&(0,i.jsx)("div",{className:"fx-charge"}),a&&a.lifesteal&&(0,i.jsx)("div",{className:"fx-life"})]},a?a.uid:"slot-op-".concat(n))})})(),(0,i.jsxs)("div",{className:"cg-card warlord",title:"Seigneur\nATK:".concat(s," PV:").concat(o),onClick:()=>d&&f&&f(),style:{position:"relative"},"data-cg-id":"WARLORD_P2",children:[o>0&&(0,i.jsx)("div",{className:"cg-name",children:"Seigneur"}),o>0&&(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s}),o>0&&(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:o}),"WARLORD_P2"===b&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),v.filter(e=>"WARLORD_P2"===e.id).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),"WARLORD_P2"===w&&(0,i.jsx)("div",{className:"fx-explosion"})]}),(()=>{const e=Array(8).fill(null);let t=0;for(const r of n){let n=Number.isInteger(r.slot)?r.slot:t++;for(n<0&&(n=0),n>7&&(n=7);n<=7&&e[n];)n++;n<=7&&(e[n]=r)}return Array.from({length:4}).map((t,n)=>{const a=4+n,s=e[a];return(0,i.jsxs)("div",{className:"cg-card",title:s?"".concat(s.name,"\nATK:").concat(s.atk," PV:").concat(s.hp):"Emplacement ".concat(a+1),onClick:()=>d&&s&&h(s.uid),style:(0,r.A)((0,r.A)({},P(s||{})),{},{position:"relative",transform:m&&s&&m.attackerId===s.uid&&"P2"===m.attackerOwner?"translateY(18px)":void 0}),"data-cg-id":s?s.uid:void 0,children:[s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cg-name",children:s.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(s.categories||[]).join("/")}),s.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:s.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[s.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),s.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),s.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),s.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s.atk}),(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s.hp})]}):(0,i.jsx)("div",{style:{opacity:.35,fontSize:10,color:"var(--muted)"},children:"Vide"}),s&&b===s.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:s.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),s&&v.filter(e=>e.id===s.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),s&&s.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),s&&s.shield&&(0,i.jsx)("div",{className:"fx-shield"}),s&&s.charge&&(0,i.jsx)("div",{className:"fx-charge"}),s&&s.lifesteal&&(0,i.jsx)("div",{className:"fx-life"})]},s?s.uid:"slot-op-".concat(a))})})()]}),(0,i.jsxs)("div",{className:"cg-row self",children:[(()=>{const e=Array(8).fill(null);let n=0;for(const r of t){let t=Number.isInteger(r.slot)?r.slot:n++;for(t<0&&(t=0),t>7&&(t=7);t<=7&&e[t];)t++;t<=7&&(e[t]=r)}return Array.from({length:4}).map((t,n)=>{const a=e[n],s=!(!d||!a||d.uid!==a.uid),o=a&&a.canAttack&&"P1"===x;return(0,i.jsxs)("div",{className:"cg-card ".concat(s?"selected":""," ").concat(o?"can-attack":""),title:a?"".concat(a.name,"\nATK:").concat(a.atk," PV:").concat(a.hp).concat(a.canAttack?"":"\n(ne peut pas attaquer)"):"Emplacement ".concat(n+1),onClick:()=>{null==k?a&&o&&c(a):A&&A(n)},style:(0,r.A)((0,r.A)({},P(a||{})),{},{position:"relative",transform:m&&a&&m.attackerId===a.uid&&"P1"===m.attackerOwner?"translateY(-18px)":void 0}),"data-cg-id":a?a.uid:void 0,children:[a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cg-name",children:a.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(a.categories||[]).join("/")}),a.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:a.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[a.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),a.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),a.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),a.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:a.atk}),(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:a.hp})]}):(0,i.jsx)("div",{style:{opacity:k?.8:.25,border:"1px dashed var(--line)",borderRadius:8,width:"100%",height:"100%"}}),a&&b===a.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:a.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),a&&v.filter(e=>e.id===a.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),a&&a.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),a&&a.shield&&(0,i.jsx)("div",{className:"fx-shield"}),a&&a.charge&&(0,i.jsx)("div",{className:"fx-charge"}),a&&a.lifesteal&&(0,i.jsx)("div",{className:"fx-life"}),null!=k&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,boxShadow:"inset 0 0 0 2px rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.06)"}})]},a?a.uid:"slot-you-".concat(n))})})(),(()=>{const e=d&&d.isWarlord,t="P1"===x&&!l,n="P1"===x&&!l;return(0,i.jsxs)("div",{className:"cg-card warlord ".concat(e?"selected":""," ").concat(t?"can-attack":""),title:"Seigneur\nATK:".concat(s," PV:").concat(a).concat(t?"":"\n(d\xe9j\xe0 utilis\xe9)"),onClick:()=>t&&p&&p(),style:{position:"relative"},"data-cg-id":"WARLORD_P1",children:[a>0&&(0,i.jsx)("div",{className:"cg-name",children:"Seigneur"}),a>0&&(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s}),a>0&&(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:a}),"WARLORD_P1"===b&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),v.filter(e=>"WARLORD_P1"===e.id).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),(0,i.jsx)("button",{className:"week-btn",style:{position:"absolute",right:4,bottom:4,padding:"2px 6px",fontSize:10},disabled:!n,onClick:e=>{e.stopPropagation(),g&&g()},title:"Capacit\xe9: 1 \xe9nergie \u2192 pioche 1",children:"1e: Tirer"}),"WARLORD_P1"===w&&(0,i.jsx)("div",{className:"fx-explosion"})]})})(),(()=>{const e=Array(8).fill(null);let n=0;for(const r of t){let t=Number.isInteger(r.slot)?r.slot:n++;for(t<0&&(t=0),t>7&&(t=7);t<=7&&e[t];)t++;t<=7&&(e[t]=r)}return Array.from({length:4}).map((t,n)=>{const a=4+n,s=e[a],o=!(!d||!s||d.uid!==s.uid),l=s&&s.canAttack&&"P1"===x;return(0,i.jsxs)("div",{className:"cg-card ".concat(o?"selected":""," ").concat(l?"can-attack":""),title:s?"".concat(s.name,"\nATK:").concat(s.atk," PV:").concat(s.hp).concat(s.canAttack?"":"\n(ne peut pas attaquer)"):"Emplacement ".concat(a+1),onClick:()=>{null==k?s&&l&&c(s):A&&A(a)},style:(0,r.A)((0,r.A)({},P(s||{})),{},{position:"relative",transform:m&&s&&m.attackerId===s.uid&&"P1"===m.attackerOwner?"translateY(-18px)":void 0}),"data-cg-id":s?s.uid:void 0,children:[s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cg-name",children:s.name}),(0,i.jsx)("div",{style:{fontSize:10,color:"var(--muted)"},children:(s.categories||[]).join("/")}),s.effect&&(0,i.jsx)("div",{style:{fontSize:10,color:"var(--accent)"},children:s.effect}),(0,i.jsxs)("div",{style:{display:"flex",gap:4,flexWrap:"wrap",fontSize:10,marginTop:2},children:[s.taunt&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Prov"}),s.shield&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Bouclier"}),s.charge&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Charge"}),s.lifesteal&&(0,i.jsx)("span",{style:{padding:"0 4px",border:"1px solid #999",borderRadius:3},children:"Vol"})]}),(0,i.jsx)("div",{style:{position:"absolute",left:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s.atk}),(0,i.jsx)("div",{style:{position:"absolute",right:6,bottom:6,padding:"2px 6px",borderRadius:4,background:"rgba(0,0,0,0.35)",fontSize:12,fontWeight:700},children:s.hp})]}):(0,i.jsx)("div",{style:{opacity:k?.8:.25,border:"1px dashed var(--line)",borderRadius:8,width:"100%",height:"100%"}}),s&&b===s.uid&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,background:s.shield?"rgba(80,160,255,0.35)":"rgba(255,255,255,0.35)",filter:"blur(1px)"}}),s&&v.filter(e=>e.id===s.uid).map(e=>(0,i.jsxs)("div",{style:{position:"absolute",top:-10,left:"50%",transform:"translateX(-50%)",color:"#e74c3c",fontWeight:800,textShadow:"0 0 2px #000",animation:"cg-float 0.7s ease-out forwards"},children:["-",e.amount]},e.key)),s&&s.taunt&&(0,i.jsx)("div",{className:"fx-taunt"}),s&&s.shield&&(0,i.jsx)("div",{className:"fx-shield"}),s&&s.charge&&(0,i.jsx)("div",{className:"fx-charge"}),s&&s.lifesteal&&(0,i.jsx)("div",{className:"fx-life"}),null!=k&&(0,i.jsx)("div",{style:{position:"absolute",inset:0,borderRadius:8,boxShadow:"inset 0 0 0 2px rgba(255,255,255,0.25)",background:"rgba(255,255,255,0.06)"}})]},s?s.uid:"slot-you-".concat(a))})})()]})]})}function u(e){let{fromId:t,toId:n}=e;const[r,s]=a.useState(null);return a.useEffect(()=>{if(!t||!n)return;const e=document.querySelector('[data-cg-id="'.concat(CSS.escape(t),'"]')),r=document.querySelector('[data-cg-id="'.concat(CSS.escape(n),'"]'));if(!e||!r)return;const a=e.getBoundingClientRect(),i=r.getBoundingClientRect(),o=a.left+a.width/2,l=a.top+a.height/2,d=i.left+i.width/2-o,c=i.top+i.height/2-l,u=Math.hypot(d,c),p=180*Math.atan2(c,d)/Math.PI;s({position:"fixed",left:o,top:l,width:u,height:3,transform:"rotate(".concat(p,"deg)"),transformOrigin:"0 50%",background:"linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.8), rgba(255,255,255,0.0))",pointerEvents:"none",borderRadius:2});const h=setTimeout(()=>s(null),250);return()=>clearTimeout(h)},[t,n]),r?(0,i.jsx)("div",{style:r}):null}}}]);
//# sourceMappingURL=537.d3ef93ef.chunk.js.map